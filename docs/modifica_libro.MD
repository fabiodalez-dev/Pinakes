# Guida Completa: Come Modificare un Libro

## Introduzione per l'Utente Finale

Questa guida ti spiega **passo dopo passo** come **modificare e aggiornare le informazioni** di un libro già esistente nel sistema. La modifica è **più facile di quanto pensi** - puoi cambiare praticamente tutto e il sistema protegge i dati importanti.

Modifica i tuoi libri quando scopri **errori di battitura**, quando **ricevi nuove informazioni**, o quando la **posizione fisica cambia**.

---

## Come Accedere alla Modifica

### Metodo 1: Dalla Lista Libri (Più veloce)
1. **Vai su**: Dashboard → **Libri**
2. **Trova** il libro nella lista
3. **Clicca** l'icona  **Modifica** nella riga
4. **Vedrai** il form precompilato con i dati attuali

### Metodo 2: Dalla Scheda Libro (Più dettagliato)
1. **Clicca** sul titolo del libro per aprire la scheda completa
2. **Clicca** il bottone **"Modifica Libro"** (icona matita)
3. **Vedrai** la stessa form di modifica

### Metodo 3: Dopo l'Inserimento (Subito dopo aver salvato)
1. Dopo aver inserito un nuovo libro, vedrai opzioni rapide
2. **Clicca** "Modifica" se vuoi cambiare subito qualcosa
3. **Utile per** correzioni veloci

---

## Cosa Puoi Modificare

### **Sempre Modificabile** (Nessuna restrizione)

| **Campo** | **Perché cambiarlo** | **Esempio** |
|-----------|----------------------|------------|
| **Titolo** | Correggere errori di battitura | "Divina Commedia" → "La Divina Commedia" |
| **Sottotitolo** | Aggiungere informazioni mancanti | Aggiungere "Edizione illustrata" |
| **Autore/i** | Correggere nome o aggiungere co-autori | "Dante" → "Dante Alighieri" |
| **Editore** | Correggerlo se sbagliato | "Mondadori" → "Feltrinelli" |
| **Descrizione** | Aggiungere dettagli o trama | Espandere la sinossi |
| **Copertina** | Sostituire con versione migliore | Caricare foto più chiara |
| **Parole Chiave** | Aggiungere tag per ricerca | "fantasy, magia, avventura" |
| **Note Varie** | Aggiungere informazioni particolari | "Prima edizione", "Con dedica" |

### **Con Limitazioni** (Se ci sono prestiti attivi)

| **Campo** | **Perché è limitato** | **Cosa fare** |
|-----------|----------------------|--------------|
| **Numero copie** | Per non creare confusione con i prestiti | Aspetta la restituzione |
| **Posizione Fisica** | Se il libro è in prestito | Notifica quando torna |
| **Stato** | Alcuni stati sono bloccati | Contatta l'amministratore |

---

## Accesso Quick Update da ISBN

### Perché usarlo?

Se il tuo libro è ancora **recente e disponibile online**, puoi **aggiornare automaticamente** i dati:

#### Scenario
Hai inserito un libro ma ti rendi conto che:
- La copertina scaricata non è quella giusta
- Il prezzo è cambiato
- Mancano dettagli nella descrizione

#### Come Fare
1. **Sezione "Aggiorna da ISBN"** in alto a destra del form
2. **Digita o incolla**: L'ISBN (es. `9788842935780`)
3. **Clicca**: **"Aggiorna Dati"** (icona sincronizzazione)
4. **Attendi**: 3-5 secondi
5. **Verifica**: I nuovi dati sono stati importati
6. **Salva**: Le modifiche con il pulsante verde

---

## Guida Passo-Passo Completa

### Passo 1: Accesso alla Form
```
Dashboard → Libri →  Modifica
```

Vedrai:
- **ID Libro**: Numero univoco in alto (es. #123)
- **Titolo attuale**: In grassetto (es. "Il Nome della Rosa")
- **Stato**: Disponibile/Prestato/Danneggiato/ecc.
- **Copertina attuale**: Anteprima piccola sul lato

### Passo 2: Modifica Semplice - Campo Singolo

#### Esercizio 1: Correggere Titolo
```
Prima: "divina commedia"
Dopo: "La Divina Commedia"
```

1. **Posiziona il cursore** nel campo "Titolo"
2. **Seleziona tutto** (Ctrl+A)
3. **Digita** il nuovo testo
4. Continua con gli altri campi o salva

#### Esercizio 2: Aggiungere Sottotitolo
```
Titolo: "Sapiens"
Sottotitolo: "Da animali a dèi: Breve storia dell'umanità"
```

1. **Clicca** sul campo "Sottotitolo"
2. **Digita** il sottotitolo
3. **Nota**: È opzionale, lascialo vuoto se non applicabile

### Passo 3: Modifica Complessa - Autore

#### Scenario: Cambiare o Aggiungere Autore

**Situazione 1: Correggere nome incompleto**
```
Prima: "Dante" (solo nome)
Dopo: "Dante Alighieri" (nome completo)
```

1. **Clicca** sul campo "Autori"
2. **Cancella** l'autore sbagliato (clicca la X sul badge)
3. **Digita** il nome corretto (es. "Dante Alighieri")
4. **Seleziona** se appare nella lista
5. **Oppure premi INVIO** per crearlo nuovo

**Situazione 2: Aggiungere co-autore**
```
Libro: "Dune"
Primo autore: "Frank Herbert"
Vuoi aggiungere: "Kevin J. Anderson"
```

1. **Nel campo Autori**, digita il nuovo nome
2. **Aggiungi** come nuovo autore
3. **L'ordine conta**: Primo = autore principale

### Passo 4: Modifica Posizione Fisica

#### Scenario: Libro da spostare

**Situazione: Riorganizzazione scaffali**
```
Prima: Scaffale A, Mensola 2, Posizione 15
Dopo: Scaffale B, Mensola 1, Posizione 8
```

1. **Sezione**: "Posizione Fisica nella Biblioteca"
2. **Cambia Scaffale**: Seleziona da menu (es. "B - Narrativa Contemporanea")
3. **Cambia Mensola**: Si aggiorna automaticamente (es. "Livello 1")
4. **Cambia Posizione**: Opzioni:
   - **Manuale**: Scrivi il numero (es. `8`)
   - **Automatica**: Clicca "Genera automaticamente" → il sistema trova il primo posto libero
5. **Nota**: La "Collocazione" si aggiorna automaticamente (es. "B.1.8")

>  **Vuoi approfondire?**
> Leggi la [Guida Collocazione](/docs/collocazione.MD) per comprendere scaffali, mensole e numerazione progressiva.

### Passo 5: Modifica Classificazione

#### Dewey - Aggiornamento

**Situazione: Libro mal classificato**
```
Prima: Letteratura (800)
Dopo: Saggistica Scientifica (500 - Scienze)
```

1. **Sezione**: "Classificazione Dewey"
2. **Seleziona Classe**: (000-900) → es. "500 - Scienze Pure"
3. **Seleziona Divisione**: Si abilita automaticamente → es. "520 - Astronomia"
4. **Seleziona Sezione** (opzionale): Per massima precisione → es. "523.1 - Cosmologia"
5. **Vedrai**: Il codice finale si aggiorna (es. "523.1")

>  **Ricorda**: Non devi sempre arrivare al terzo livello. Anche solo la classe o divisione va bene!

#### Genere Letterario

**Situazione: Aggiungere genere mancante**
```
Prima: Nessun genere
Dopo: Prosa → Narrativa → Fantasy
```

1. **Seleziona Radice**: es. "Prosa"
2. **Seleziona Genere**: Si abilita → es. "Narrativa"
3. **Seleziona Sottogenere** (opzionale): es. "Fantasy"

### Passo 6: Modifica Dettagli Fisici

#### Aggiungere Informazioni Mancanti

```
Campo: Numero Pagine
Prima: Vuoto
Dopo: 320

Campo: Peso
Prima: Vuoto
Dopo: 0.450 (kg)

Campo: Formato
Prima: Vuoto
Dopo: "Brossura"
```

1. **Numero Pagine**: Solo cifre (es. `320`, non "320 pagine")
2. **Peso**: In kg con decimali (es. `0.450` = 450 grammi)
3. **Formato**: Tipo di copertina (es. "Brossura", "Copertina rigida")
4. **Dimensioni**: Formato libero (es. "21x14 cm" oppure "21x14x3 cm")

### Passo 7: Gestione Copie

#### Scenario: Hai acquistato un'altra copia

```
Prima: 1 copia totale, 1 disponibile
Dopo: 3 copie totali, 3 disponibili
```

1. **Campo "Copie Totali"**: Cambia da `1` a `3`
2. **Campo "Copie Disponibili"**: Cambia da `1` a `3`
3. **Il sistema**: Gestisce automaticamente i prestiti
   - Quando qualcuno prende in prestito → Copie disponibili scende a `2`
   - Se tutti in prestito → Copie disponibili = `0`

>  **Attenzione**: Se il libro è in prestito, potresti non poter cambiare questo campo!

### Passo 8: Gestione Copertina

#### Scenario 1: Sostituire Copertina (Versione migliore)

1. **Sezione**: "Copertina del Libro"
2. **Vedrai**: L'anteprima della copertina attuale
3. **Opzioni**:
   - **Drag & Drop**: Trascina nuova immagine sull'area
   - **Sfoglia**: Clicca per scegliere file
4. **Requisiti**:
   - Formato: JPG, PNG, JPEG
   - Dimensione: Max 5 MB
   - Consiglio: 400×600 pixel
5. **Salva**: La nuova copertina sostituisce quella vecchia

#### Scenario 2: Aggiungere Copertina Mancante

Se il libro **non ha copertina** (solo placeholder):
1. Segui gli stessi passi di Scenario 1
2. Carica la tua foto/immagine
3. **Salva**

#### Scenario 3: Rimuovere Copertina

Se vuoi tornare al placeholder:
1. Non caricare nulla (lascia vuoto)
2. **Salva**
3. Il sistema userà di nuovo il placeholder generico

---

## Modifica della Copertina - Dettagli

### Formato File Accettati
-  JPG (foto)
-  PNG (grafica)
-  JPEG (variante JPG)

### Dimensioni
- **Max**: 5 MB
- **Consigliato**: 400×600 pixel (rapporto libro)
- **Minimo**: 300×400 pixel (comunque leggibile)

### Dove Trovare Immagini
1. **Fotografa il libro**: Scatta foto con telefono
2. **Scraping automatico**: Se hai l'ISBN, usa "Aggiorna da ISBN"
3. **Google Immagini**: Cerca "copertina [titolo] [autore]"
4. **Siti librerie**: Amazon, IBS, Mondadori

### Consigli
- **Usa foto ben illuminate**: Migliore contrasto
- **Allinea il libro**: Foto retta, non storta
- **Copri l'intera copertina**: Non solo il titolo
- **Riduci risoluzione se troppo grande**: Usa strumenti online

---

## Posizione Fisica - Guida Completa

### I Tre Elementi: Scaffale, Mensola, Posizione

#### Scaffale
**Cosa è?** Lo scaffale vero e proprio (A, B, C, ecc.)

**Esempio**:
```
[A] Scaffale Principale
[B] Narrativa Contemporanea
[C] Saggistica Scientifica
```

**Come cambiare**: Menu a tendina con tutti gli scaffali disponibili

#### Mensola
**Cosa è?** Il ripiano all'interno dello scaffale

**Convenzione**:
```
Livello 1 = Ripiano più alto
Livello 2 = Secondo ripiano
Livello 3 = Ripiano centrale
...
Livello 5 = Ripiano più basso
```

**Come cambia**: Dopo scegliere lo scaffale, il menu si popola automaticamente

#### Posizione Progressiva
**Cosa è?** Il numero del libro da sinistra a destra

**Esempio**:
```
Scaffale A, Mensola 2, Posizione 15
= Il 15° libro dal lato sinistro
```

**Due opzioni**:
1. **Manuale**: Scrivi il numero (es. `15`)
2. **Automatica**: Clicca "Genera automaticamente" → Il sistema trova il primo numero libero

### Collocazione Finale (Generata Automaticamente)

**Formato**: `SCAFFALE.MENSOLA.POSIZIONE`

**Esempi**:
```
A.2.15 = Scaffale A, Mensola 2, Posizione 15
B.1.03 = Scaffale B, Mensola 1, Posizione 3
C.3.27 = Scaffale C, Mensola 3, Posizione 27
```

---

## Salvataggio e Conferma

### Passo-per-Passo Salvataggio

1. **Scorri il form** fino in fondo
2. **Verifica** che i campi obbligatori siano compilati:
   -  Titolo (sempre obbligatorio)
   -  Autore (sempre obbligatorio)
   -  Scaffale e Mensola (per posizione fisica)
3. **Clicca**: Bottone verde **"Salva Modifiche"** in basso
4. **Attendi**: Messaggio di conferma (1-2 secondi)
5. **Vedrai**: "Modifiche salvate con successo!"

### Cosa Succede Dopo il Salvataggio

**Immediatamente**:
-  Le modifiche sono salvate nel database
-  Il libro aggiornato appare in lista
-  Se cerchi il libro, vedi i nuovi dati
-  Tutti gli utenti vedono gli aggiornamenti

**In automatico**:
-  Data di ultima modifica si aggiorna
-  Statistiche della biblioteca si aggiornano
-  Ricerca full-text si aggiorna
-  Cache refresh automatico

### Se Qualcosa Va Storto

**Messaggio: "Campo obbligatorio mancante"**
- Verifica Titolo e Autore
- Verifica Scaffale/Mensola se necessario

**Messaggio: "Posizione già occupata"**
- Usa "Genera automaticamente" per trovare un'altra posizione
- O scegli manualmente un numero diverso

**Messaggio: "Connessione fallita"**
- Il server non risponde
- Prova a salvare di nuovo
- Contatta l'amministratore se persiste

---

## Consigli Pratici per la Modifica

### **Best Practices**

#### Per Titoli e Autori
- **Sempre**: Controlla l'ortografia prima di salvare
- **Sempre**: Verifica che i nomi siano completi e corretti
- **Usa**: Riferimenti online se incerto (Amazon, Google Books)

#### Per Posizioni Fisiche
- **Sempre**: Genera automaticamente se non sei sicuro
- **Verifica**: Che il libro sia effettivamente in quella posizione
- **Nota**: Usa "Note Varie" se il libro è temporaneamente altrove

#### Per Copertine
- **Carica**: Immagini di buona qualità
- **Verifica**: Che sia davvero la copertina giusta
- **Salva**: Dopo ogni cambio significativo

#### Per Classificazione
- **Rileggi**: La guida Dewey se non sei sicuro
- **Mantieni coerenza**: Libri simili classificati allo stesso modo
- **Non cambiare spesso**: Metti la classificazione più logica

### **Errori Comuni da Evitare**

#### Errori di Formattazione
-  Titolo tutto maiuscolo: "IL NOME DELLA ROSA"
  -  Corretto: "Il nome della rosa"
-  Autore abbreviato: "D. Alighieri"
  -  Corretto: "Dante Alighieri"

#### Errori di Posizione
-  Dimenticare di aggiornare la posizione
  -  Aggiorna sempre se il libro si sposta
-  Inserire una posizione occupata
  -  Usa "Genera automaticamente"

#### Errori di Copertina
-  Copertina di edizione diversa
  -  Verifica che sia la stessa edizione
-  Foto sfocata o troppo piccola
  -  Minimo 300×400 pixel, ben nitida

#### Errori di Completezza
-  Dimenticare di salvare
  -  Clicca sempre "Salva Modifiche"
-  Salvare con campi obbligatori vuoti
  -  Verifica prima di salvare

---

## Modifche Frequenti - Casi Reali

### Caso 1: Correggere Errore di Inserimento

**Situazione**: Hai digitato il titolo male
```
Inserito: "La Divina Comodia" 
Corretto: "La Divina Commedia" 
```

**Come fare**:
1. Modifica → Correggi titolo
2. Salva
3.  Fatto in 30 secondi

---

### Caso 2: Aggiungere Informazioni Mancanti

**Situazione**: Hai inserito solo titolo e autore, ora vuoi aggiungere il resto

**Da aggiungere**:
- Editore: "Feltrinelli"
- Data: "2020"
- Pagine: 320
- Formato: "Brossura"

**Come fare**:
1. Modifica → Compila i campi
2. Salva
3.  Fatto in 2 minuti

---

### Caso 3: Spostare Libro a Scaffale Nuovo

**Situazione**: Hai riorganizzato gli scaffali

**Spostamento**:
```
Prima: Scaffale A, Mensola 2, Posizione 15
Dopo: Scaffale C, Mensola 1, Posizione 5
```

**Come fare**:
1. Modifica → Sezione "Posizione Fisica"
2. Cambia Scaffale: A → C
3. Cambia Mensola: 2 → 1
4. Cambia Posizione: 15 → 5
5. Salva
6.  Fatto in 1 minuto

---

### Caso 4: Aggiornare Copertina

**Situazione**: La copertina scaricata non è quella giusta o è sfocata

**Come fare**:
1. Modifica → Sezione "Copertina del Libro"
2. Carica nuova immagine
3. Salva
4.  Fatto in 1 minuto

---

### Caso 5: Cambiare Numero Copie

**Situazione**: Avevi 1 copia, ne hai comprata 2 altre

**Come fare**:
1. Modifica → Sezione "Dettagli Fisici"
2. Copie Totali: 1 → 3
3. Copie Disponibili: 1 → 3
4. Salva
5.  Fatto in 30 secondi

---

## Messaggi Comuni e Soluzioni

### "Campo obbligatorio mancante"

**Cosa significa**: Hai cercato di salvare senza compilare un campo richiesto

**Campi obbligatori**:
- Titolo
- Autore
- Scaffale e Mensola (per la posizione)

**Soluzione**:
1. Scorri il form
2. Cerca il campo con il bordo rosso
3. Compilalo e salva di nuovo

---

### "Posizione già occupata"

**Cosa significa**: Hai inserito manualmente una posizione che esiste già

**Soluzione**:
1. Clicca "Genera automaticamente"
2. Il sistema trova il primo numero libero
3. Salva

---

### "ISBN non trovato (durante aggiornamento)"

**Cosa significa**: L'ISBN inserito non è disponibile online

**Soluzione**:
1. Verifica che l'ISBN sia corretto
2. Prova con o senza trattini
3. Continua con modifica manuale
4. Salva i campi che hai modificato

---

### "Libro in prestito - campo bloccato"

**Cosa significa**: Il libro è attualmente in prestito e non puoi cambiar certe cose

**Soluzione**:
1. Aspetta la restituzione del libro
2. Oppure contatta l'amministratore
3. O annota le modifiche in "Note Varie" per farle dopo

---

## Guida agli Aggiornamenti Batch

### Quando Modificare Più Libri

**Situazione**: Hai riorganizzato uno scaffale intero

**Approach**:
1. Modifica il primo libro
2. Cambia posizione
3. Salva
4. Ripeti per gli altri libri
5. Suggerimento: Apri il modulo in una nuova scheda per velocizzare

---

## Supporto e Aiuto

### Se Hai Problemi

#### 1. Consulta questa guida
- Usa Ctrl+F per trovare la tua situazione
- Scorri i "Casi Reali" per esempi pratici

#### 2. Prova a salvare di nuovo
- A volte è un errore temporaneo
- Controlla il form e ripeti

#### 3. Contatta l'amministratore
- Email o numero di telefono dell'amministratore
- Descrivi il problema esattamente
- Fai uno screenshot se possibile

---

## Riepilogo Veloce

### Modifica Veloce (1 minuto)
1. Dashboard → Libri →  Modifica
2. Cambiai un campo (es. titolo)
3. Clicca "Salva Modifiche"
4.  Fatto!

### Modifica Completa (5 minuti)
1. Accedi al form
2. Corregi: Titolo, Autore, Editore, Descrizione
3. Aggiungi: ISBN, Pagine, Peso, Formato
4. Cambia: Posizione fisica se necessario
5. Aggiorna: Copertina se presente
6. Salva
7.  Fatto!

### Aggiornamento da ISBN (3 minuti)
1. Accedi al form
2. Sezione "Aggiorna da ISBN" in alto
3. Incolla ISBN
4. Clicca "Aggiorna Dati"
5. Verifica i dati importati
6. Salva
7.  Fatto!

---

## Guide Correlate

- [Guida Scheda Libro](/docs/scheda_libro.MD) - Come visualizzare i dettagli del libro
- [Guida Inserimento Libri](/docs/inserimento_libri.MD) - Come aggiungere un nuovo libro
- [Guida Stampa Etichette](/docs/stampa_etichette.MD) - Come stampare l'etichetta
- [Guida Collocazione](/docs/collocazione.MD) - Come organizzare scaffali e mensole
- [Guida Prestiti](/docs/prestiti.MD) - Come gestire i prestiti dei libri

---

** Documento aggiornato: 19 Ottobre 2025**
** Versione: 3.0.0 - Guida Completa Estesa**
** Per utenti finali della biblioteca**
